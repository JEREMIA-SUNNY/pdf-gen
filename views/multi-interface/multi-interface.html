<!DOCTYPE html>
<html>
  <head>
    <title>{{ data.title }}</title>
    <meta charset="UTF-8" />
    <!-- Import Noto Sans font from Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
      @page {
        size: A4;
        margin-top: 95px;
        margin-bottom: 95px;
        @bottom-left {
          margin-top: 6px;
          content: "N.K.RF Products & Services Private Limited\A#2, 2nd Cross, Rustam Bagh Layout,Old AirportRoad, Bangalore -560017\APhone: +91-80-25281840 | Email: reachus@nkegroup.com";
          font-size: 12px;
          white-space: pre;
          line-height: 15px;
        }

        @bottom-right {
          content: counter(page) "/" counter(pages);
          font-size: 12px;
        }
      }

      * {
        font-family: "Noto Sans", "DejaVu Sans", sans-serif;
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-size: 12px;
      }

      img,
      table,
      span {
        min-height: 10px;
      }

      .header {
        border-bottom: 2px solid #00000055;
        display: flex;
        position: fixed;
        align-items: flex-end;
        justify-content: space-between;
        left: 0;
        top: -100px;
        height: 75px;
        width: 100%;
        padding: 10px 0;
        min-height: 1px;
      }
      table {
        page-break-inside: auto;
        break-inside: auto;
        border-collapse: collapse;
        width: 100%;
      }
      thead {
        display: table-header-group;
      }   /* repeat header when table splits */
      tfoot {
        display: table-footer-group;
      }   /* if you ever add table footers */
      tr {
        page-break-inside: avoid;
        break-inside: avoid;
      }
      th,
      td {
        page-break-inside: avoid;
        break-inside: avoid;
      }
      
     .header > .title {
        display: flex;
        align-items: flex-end;
        font-weight: bold;
        color: #375fbd;
        white-space: nowrap;
        max-width: calc(100% - 120px);
        flex-shrink: 0;
        /* Fixed font size to match section-desc */
        font-size: 14px;
      }

      .header > .logo {
        width: 100px;
        flex-shrink: 0;
      }

      .footer {
        border-top: 2px solid #00000055;
        position: fixed;
        left: 0;
        bottom: -100px;
        height: 80px;
        width: 100%;
        gap: 3px;
        font-size: 12px;
      }

      /* .table-container {
        border-left: 1px solid #00000055;
        border-top: 1px solid #00000055;
      } */

      .td {
        border-right: 1px solid #00000055;
        border-bottom: 1px solid #00000055;
        padding: 5px;
      }

       .table td:first-child,
       .table th:first-child {
        border-left: 1px solid #00000055;
      }
      .table tr:first-child > .td {
        border-top: 1px solid #00000055;
      }
      .td-center {
        text-align: center;
      }

      .td-head {
        background-color: #375fbd;
        color: white;
        font-weight: bold;
      }

      .section-title {
        font-size: 14px;
        font-weight: bold;
        color: #375fbd;
        /* Small spacing, but don't force pushing table to next page */
        margin-bottom: 6px;
      }
      .section-desc {
        font-size: 14px;
        font-weight: bold;
        color: black;
      }

      .section {
        display: block; 
        width: 100%;
      }

      .section-body {
        display: grid;
        grid-template-columns: 1fr 2fr;
        gap: 0;
      }

      .section-body > p {
        padding: 5px 0;
      }
      main-body {
        display: grid;
        grid-template-columns: 1fr;
        gap: 20px;
      }

      /* Optional: small sections try to stay together, but can break if needed */
      .section { break-inside: auto; }

      /* Only force page break for remarks if there's actual content before it */
      .remarks-page { 
        margin-top: 20px;
      }

      /* Conditional page break - only apply if needed */
      .force-page-break { break-before: page; page-break-before: always; }

      /* Print-friendly flow layout for the main content sections (avoid CSS grid) */
      .content-sections { padding-top: 18px; display: block; }
      .content-sections > .section { margin-bottom: 12px; }

      /* Hide empty sections */
      .empty-section { display: none; }
    </style>
  </head>

  <body>
    {% include "headerMulti.html" %} 
    {% if data.adaptorDatasheetImage %}
    <img src="{{ data.adaptorDatasheetImage }}" style="width: 100%" />
    {% endif %}

    {% if data.description %}
    <div class="section-desc">DESCRIPTION: {{ data.description }}</div>
    {% endif %}

    {% set has_content_before_remarks = false %}
    <div class="content-sections">
      <!-- MATERIALS -->
      {# detect any material rows with valueA or valueB #}
      {% set materials_a = data.materials | default([]) | selectattr('valueA') | list %}
      {% set materials_b = data.materials | default([]) | selectattr('valueB') | list %}
      {% set has_materials = (materials_a|length > 0) or (materials_b|length > 0) %}
      {% if has_materials %}{% set has_content_before_remarks = true %}{% endif %}
      {% include "multi-interface/materials-table.html" %}

      <!-- ELECTRICAL CHARACTERISTICS -->
      {% set electrical_with_values = data.electricalChars | default([]) | selectattr('value') | list %}
      {% set has_electrical = electrical_with_values|length > 0 %}
      {% if has_electrical %}{% set has_content_before_remarks = true %}{% endif %}
      {% include "multi-interface/electrical-chars-table.html" %}

      <!-- MECHANICAL CHARACTERISTICS -->
      {% set mechanical_with_values = data.machanicalSpecs | default([]) | selectattr('value') | list %}
      {% set has_mechanical = mechanical_with_values|length > 0 %}
      {% if has_mechanical %}{% set has_content_before_remarks = true %}{% endif %}
      {% include "multi-interface/mechanical-chars-table.html" %}

      <!-- ENVIRONMENTAL CHARACTERISTICS -->
      {% set environmental_with_values = data.envSpecs | default([]) | selectattr('value') | list %}
      {% set has_environmental = environmental_with_values|length > 0 %}
      {% if has_environmental %}{% set has_content_before_remarks = true %}{% endif %}
      {% include "multi-interface/environmental-chars-table.html" %}

      <!-- INTERFACE STANDARDS -->
      {% set interface_with_values = data.interfaces | default([]) | selectattr('value') | list %}
      {% set has_interface = interface_with_values|length > 0 %}
      {% if has_interface %}{% set has_content_before_remarks = true %}{% endif %}
      {% include "multi-interface/interface-standards-table.html" %}

      <!-- CUSTOM SPECIFICATIONS -->
      {% set custom_with_values = data.customSpecifications | default([]) | selectattr('specification') | list %}
      {% set has_custom = custom_with_values|length > 0 %}
      {% if has_custom %}{% set has_content_before_remarks = true %}{% endif %}
      {% include "multi-interface/custom-specs-table.html" %}
    </div>

    <!-- Conditionally apply page break only if there's content before remarks -->
    <div class="section {% if has_content_before_remarks %}remarks-page force-page-break{% else %}remarks-page{% endif %}">
      {% include "remarks-table.html" %}
    </div>
    {% include "footer.html" %}
  </body>
</html>